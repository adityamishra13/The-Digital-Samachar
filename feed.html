<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Digital Samachar</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="navbar"></div>
    <div id="title">
        <!-- Don't miss a news -->
        <h2>The Digital Samachar</h2>
        <!-- <img src="back.png" alt="" id="logo"> -->
    </div>
    <div id="newsarea">
        <h4 style="color: white;font-size:20px;justify-self:center">Choose from the available options and get your
            Personalised Feed ! </h4>

        <div id="choose">
            <h3 style="margin:10px;">Select Category</h3>
            <select id="mainSelect" style="margin: 10px;">
                <option value="">-- Select One --</option>
                <option value="everything">Source</option>
                <option value="top-headlines">Top Headlines</option>
            </select>

            <h3 id="subTitle" style="display:none;margin:10px;">Select Option</h3>
            <select id="subSelect" style="display:none; margin:10px;"></select>

            <button id="saveBtn"
                style="display:none;margin:10px;color:white; background-color:rgb(14, 51, 216);font-size:15px;padding:10px;">Save</button>

            <p id="result" style="margin: 10px; font-size:20px;"></p>
        </div>

    </div>
    <div id="footer"></div>


    <script>
        const mainSelect = document.getElementById("mainSelect");
        const subSelect = document.getElementById("subSelect");
        const subTitle = document.getElementById("subTitle");
        const saveBtn = document.getElementById("saveBtn");
        const result = document.getElementById("result");

        const options = {
            "everything": ["bbc-news.json", "cnn.json", "fox-news.json"],
            "top-headlines": ["business", "entertainment", "health", "science", "sports", "technology"]
        };

        mainSelect.addEventListener("change", () => {
            const selected = mainSelect.value;
            if (selected) {
                subSelect.innerHTML = "";
                options[selected].forEach(opt => {
                    const option = document.createElement("option");
                    option.value = opt;
                    option.textContent = opt;
                    subSelect.appendChild(option);
                });
                subTitle.style.display = "block";
                subSelect.style.display = "block";
                saveBtn.style.display = "inline-block";
            } else {
                subTitle.style.display = "none";
                subSelect.style.display = "none";
                saveBtn.style.display = "none";
            }
        });

        saveBtn.addEventListener("click", () => {
            const data = {
                main: mainSelect.value,
                sub: subSelect.value
            };
            // store in localStorage
            localStorage.setItem("userSelection", JSON.stringify(data));

            result.textContent = `Saved: ${data.main} â†’ ${data.sub}`;
            window.location.href = "feed.html";
        });

    </script>

    <script>
        fetch('navbar.html')
            .then(res => res.text())
            .then(data => document.getElementById('navbar').innerHTML = data);
    </script>
    <script>
        fetch('footer.html')
            .then(res => res.text())
            .then(data => document.getElementById('footer').innerHTML = data);
    </script>
    <script src="index.js"></script>
</body>

</html>