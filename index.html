<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Digital Samachar</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="navbar"></div>
    <div id="title">
        <!-- Don't miss a news -->
        <h2>The Digital Samachar</h2>
        <img src="back.png" alt="" id="logo">
    </div>
    <div id="newsarea">

    </div>
    <div id="footer"></div>


    <script>
        let url = "https://saurav.tech/NewsAPI/top-headlines/category/general/in.json"
        fetchnews(url)
        function fetchnews(url) {
            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Network response was not ok");
                    }
                    return response.json();
                })
                .then(data => {
                    console.log(data)
                    let count = 1
                    const newsarea = document.getElementById("newsarea");

                    for (let source of data.articles) {

                        const newDiv = document.createElement("div");
                        newDiv.innerText = count + ". ";
                        newDiv.style.color = "green";
                        newDiv.style.border = "1px green dotted"
                        newDiv.style.margin = "10px"
                        newDiv.style.padding = "10px"
                        // newDiv.style.background="grey"

                        let newstitle = document.createElement("div");
                        newstitle.innerText = source.title;
                        newstitle.style.color = "blue";
                        newstitle.style.fontSize = "30px"

                        let newsDesc = document.createElement("div")
                        newsDesc.innerText = source.description + " - - - Author : " + source.author
                        // newscontent.style = "italic";
                        newsDesc.style.color = "black"
                        newsDesc.style.fontSize = "15px"

                        let newscontent = document.createElement("div");
                        newscontent.innerText = source.content;
                        newscontent.style.color = "black";
                        newscontent.style.fontSize = "20px"
                        if (newscontent.innerText.length > 105) {
                            newscontent.innerText = newscontent.innerText.substr(0, 100) + "...";
                        }


                        let fullnews = document.createElement("a");
                        fullnews.href = source.url;
                        fullnews.textContent = "Read in Detail ..."
                        fullnews.style.fontSize = "20px"
                        fullnews.style.fontWeight = '900'
                        fullnews.style.margin = "10px"

                        let img = document.createElement("img");
                        img.src = source.urlToImage;
                        img.alt = "News Image";
                        img.width = 100;

                        newDiv.appendChild(newstitle)
                        newDiv.appendChild(newsDesc)
                        newDiv.appendChild(newscontent)
                        newDiv.appendChild(img)
                        newDiv.appendChild(fullnews)

                        newDiv.style.backgroundColor = "white"

                        newsarea.appendChild(newDiv);
                        count++
                    }


                })
                .catch(error => {
                    console.error("Fetching error:", error);
                });
        }
    </script>

    <script>
        fetch('navbar.html')
            .then(res => res.text())
            .then(data => document.getElementById('navbar').innerHTML = data);
    </script>
    <script>
        fetch('footer.html')
            .then(res => res.text())
            .then(data => document.getElementById('footer').innerHTML = data);
    </script>
    <script src="index.js"></script>
</body>

</html>